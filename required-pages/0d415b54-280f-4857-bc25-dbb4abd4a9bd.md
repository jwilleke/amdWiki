---
title: SearchPlugin Documentation
uuid: 0d415b54-280f-4857-bc25-dbb4abd4a9bd
author: amdWiki Team
system-category: documentation
user-keywords:
  - plugin
  - search
  - documentation
  - examples
slug: searchplugin-documentation
lastModified: '2025-10-16T20:30:00.000Z'
---

# SearchPlugin Documentation

The SearchPlugin is a JSPWiki-compatible plugin that embeds search results directly in wiki pages. It provides powerful filtering capabilities and displays results in a clean table format.

## Overview

Similar to [JSPWiki's SearchPlugin](https://jspwiki-wiki.apache.org/Wiki.jsp?page=SearchPlugin), this plugin allows you to:
- Perform text searches within page content
- Filter results by system category
- Filter results by user keywords
- Display results as formatted tables
- Control the number of results displayed

**Related:** GitHub Issue #111

## Syntax

```
[{Search parameter=value ...}]
```

## Parameters

| Parameter | Type | Description | Default |
|-----------|------|-------------|---------|
| `query` | string | Search text query | `*` (all pages) |
| `system-category` | string | Filter by system category | none |
| `user-keywords` | string | Filter by user keywords (pipe-separated for OR) | none |
| `max` | number | Maximum number of results | 50 |

## Usage Examples

### Basic Search

Search for all pages containing the word "plugin":

```
[{Search query='plugin' max=10}]
```

### Search All Pages

Use the wildcard `*` to list all pages (sorted by relevance):

```
[{Search query='*'}]
```

### Filter by System Category

Find all documentation pages:

```
[{Search system-category='documentation'}]
```

Find all system configuration pages:

```
[{Search system-category='system'}]
```

Find all developer documentation:

```
[{Search system-category='developer'}]
```

### Filter by User Keywords

Find pages tagged with "economics":

```
[{Search user-keywords='economics'}]
```

Find pages with "geology" keyword:

```
[{Search user-keywords='geology'}]
```

### Multiple Keywords (OR Logic)

Find pages tagged with either "economics" OR "geology":

```
[{Search user-keywords='economics|geology'}]
```

Find pages with "medicine" OR "psychology":

```
[{Search user-keywords='medicine|psychology'}]
```

### Combined Filters

Search for "manager" in system pages only:

```
[{Search query='manager' system-category='system' max=5}]
```

Search for plugins in documentation:

```
[{Search query='plugin' system-category='documentation' max=10}]
```

Find economics-related documentation:

```
[{Search system-category='documentation' user-keywords='economics'}]
```

### Complex Queries

Search for "search" OR "index" in documentation with economics or geology keywords:

```
[{Search query='search index' system-category='documentation' user-keywords='economics|geology' max=20}]
```

## Available System Categories

The following system categories can be used with `system-category` parameter:

- **general** - General wiki pages (default)
- **system** - System configuration and infrastructure pages
- **documentation** - User and technical documentation
- **user** - User-generated content
- **test** - Testing and development pages
- **developer** - Developer documentation and technical notes

## Available User Keywords

Common user keywords that can be used with `user-keywords` parameter:

### Status Keywords
- **draft** - Work in progress content
- **review** - Content under review
- **published** - Finalized and approved content

### Subject Keywords
- **medicine** - Medical and healthcare-related content
- **geology** - Geological and earth science content
- **meteorology** - Weather and atmospheric science content
- **oceanography** - Ocean and marine science content
- **psychology** - Psychological and behavioral science content
- **sociology** - Social science and society-related content
- **anthropology** - Human culture and society content
- **economics** - Economic and financial content
- **political-science** - Political science and governance content

## Output Format

Results are displayed as a two-column table:

| Column | Description |
|--------|-------------|
| **Page** | Page title with link (includes category badge if available) |
| **Score** | Relevance score (0.000 to higher values) |

### Example Output

When you run `[{Search query='plugin' max=5}]`, you might see:

| Page | Score |
|------|-------|
| [IndexPlugin](IndexPlugin) **documentation** | 2.453 |
| [SearchPlugin Documentation](SearchPlugin%20Documentation) **documentation** | 2.187 |
| [VariablesPlugin](VariablesPlugin) **general** | 1.894 |
| [CurrentTimePlugin](CurrentTimePlugin) **general** | 1.652 |
| [ImagePlugin](ImagePlugin) **general** | 1.421 |

## Advanced Tips

### 1. Wildcard Search with Filters

List all documentation pages:
```
[{Search query='*' system-category='documentation'}]
```

### 2. Limiting Results

Get just the top 5 results:
```
[{Search query='plugin' max=5}]
```

### 3. Creating Dynamic Indexes

Create a dynamic index of all pages in a category:
```
# Documentation Pages
[{Search system-category='documentation' max=100}]

# System Pages
[{Search system-category='system' max=50}]
```

### 4. Topic Collections

Create collections of related content:
```
# Economics Resources
[{Search user-keywords='economics'}]

# Science Topics
[{Search user-keywords='geology|meteorology|oceanography'}]
```

### 5. Monitoring Recent Changes

Combine with other metadata (future enhancement):
```
[{Search query='*' max=10}]
<!-- Will be sorted by relevance/recency -->
```

## Technical Details

### Search Provider

The SearchPlugin uses the SearchManager, which by default uses the LunrSearchProvider for full-text indexing. The provider supports:

- **Full-text search** with stemming
- **Field boosting** (title, categories, keywords)
- **Snippet generation** with highlighted terms
- **Relevance scoring**

### Field Boost Values

Search fields are weighted for relevance:

| Field | Boost | Description |
|-------|-------|-------------|
| title | 10 | Page title has highest weight |
| system-category | 8 | Category matches are important |
| user-keywords | 6 | Keyword matches are significant |
| tags | 5 | Tag matches matter |
| keywords | 4 | General keyword field |
| content | 1 | Body text (default weight) |

### Performance Considerations

- The search index is built at startup and updated on page changes
- Wildcards searches (`*`) return all indexed pages
- Complex filters may reduce result count
- Maximum results is capped at 50 by default (configurable)

## Comparison with JSPWiki

### JSPWiki SearchPlugin

JSPWiki's original SearchPlugin supports:
- `query` - Standard JSPWiki search query
- `max` - Maximum results
- `set` - Store results in context variable

### amdWiki SearchPlugin Enhancements

Our implementation adds:
- ✅ `system-category` - Filter by category
- ✅ `user-keywords` - Filter by keywords with OR logic
- ✅ Enhanced result display with category badges
- ✅ Summary information (result count, filters applied)
- ✅ Better HTML table formatting

## Configuration

SearchPlugin uses the SearchManager configuration from `app-default-config.json`:

```json
{
  "amdwiki.search.enabled": true,
  "amdwiki.search.provider": "lunrsearchprovider",
  "amdwiki.search.provider.lunr.maxresults": 50,
  "amdwiki.search.provider.lunr.snippetlength": 200
}
```

## Troubleshooting

### No Results Found

**Problem:** Search returns no results

**Solutions:**
1. Check that SearchManager is enabled in configuration
2. Verify the search index has been built (check logs)
3. Try a wildcard search: `[{Search query='*'}]`
4. Check spelling of category/keyword filters

### Wrong Results

**Problem:** Results don't match expectations

**Solutions:**
1. Verify category names match exactly (case-sensitive)
2. Check user-keywords are spelled correctly
3. Use pipe `|` for OR logic: `economics|geology`
4. Try without filters first, then add them incrementally

### Error Messages

**Problem:** Plugin shows error message

**Solutions:**
1. `SearchManager not available` - Check that SearchManager is initialized
2. `Invalid max parameter` - Use positive numbers only: `max=10`
3. `Search failed` - Check server logs for detailed error information

## Examples in Action

### Create a Plugin Directory

Create a page that lists all plugins:

```markdown
# amdWiki Plugins

Here are all the plugins available in amdWiki:

[{Search query='plugin' system-category='general|documentation' max=50}]
```

### Documentation Index

Create an index of all documentation:

```markdown
# Documentation Index

## User Documentation
[{Search system-category='documentation' max=100}]

## Developer Documentation
[{Search system-category='developer' max=100}]
```

### Topic Browser

Create a topic browser by subject:

```markdown
# Science Topics

## Earth Sciences
[{Search user-keywords='geology|meteorology|oceanography'}]

## Social Sciences
[{Search user-keywords='psychology|sociology|anthropology|economics'}]
```

## See Also

- [SearchManager Documentation](SearchManager-Documentation) - Technical details
- [LunrSearchProvider](LunrSearchProvider-Documentation) - Search provider implementation
- [Plugin System](Plugin-System) - How plugins work in amdWiki
- [IndexPlugin](IndexPlugin-Documentation) - Alphabetical page index
- JSPWiki SearchPlugin: https://jspwiki-wiki.apache.org/Wiki.jsp?page=SearchPlugin

## Related Issues

- GitHub Issue #111 - SearchPlugin implementation

## Version History

| Version | Date | Changes |
|---------|------|---------|
| 1.0.0 | 2025-10-16 | Initial implementation with category and keyword filtering |

---

**Last Updated:** 2025-10-16
**Plugin Location:** `/plugins/SearchPlugin.js`
**Status:** Active ✅
