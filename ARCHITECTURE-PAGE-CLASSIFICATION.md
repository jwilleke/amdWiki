# Page Classification Architecture

## Problem Statement

amdWiki needs a comprehensive page classification system that serves multiple purposes:

1. **Operational Safety**: Distinguish app-managed vs user-managed content for safe upgrades
2. **Content Organization**: Logical categorization for navigation and search
3. **Documentation Types**: Separate user docs, developer docs, and API docs
4. **Storage Strategy**: Physical file organization that supports the operational model

## Proposed Architecture

### 1. File System Organization (Physical Storage)

```
/required-pages/     # App-managed system pages (upgrade-safe replacement)
├── Categories.md    # System category definitions  
├── PageIndex.md     # Auto-generated page index
├── SystemInfo.md    # System information page
└── ...

/pages/             # User-generated content (preserved during upgrades)
├── Welcome.md      # User's welcome page
├── MyProject.md    # User's project page
└── ...

/docs/              # Developer documentation (git-managed, versioned)
├── API.md          # API documentation
├── CONTRIBUTING.md # Development guidelines  
└── ...

/templates/         # Page templates and examples
├── ProjectTemplate.md
└── MeetingTemplate.md
```

### 2. Metadata Fields (Logical Classification)

#### Required Fields (All Pages)
```yaml
title: "Page Name"
pageType: "system" | "user" | "documentation"
uuid: "auto-generated"
lastModified: "auto-updated"
```

#### Content Classification
```yaml
category: "System/Admin"                    # Primary content category (hierarchical)
categories: ["System", "Documentation"]    # Additional system categories (max 3)
user-keywords: ["metadata", "standards"]   # User tags (max 3)
```

#### Documentation-Specific
```yaml
documentationType: "user" | "developer" | "api"  # Documentation audience
audience: "administrator" | "end-user" | "developer"
isProtected: true                               # Prevents user modification
```

#### System-Specific  
```yaml
isSystemPage: true          # App-managed content
autoGenerated: true         # Generated by system processes
updatePolicy: "replace"     # How to handle during upgrades
```

### 3. Page Type Definitions

#### System Pages (`pageType: "system"`)
- **Location**: `/required-pages/`
- **Management**: App-managed, can be replaced during upgrades
- **Examples**: Categories, PageIndex, SystemInfo, LeftMenu
- **Upgrade Behavior**: Replace with new versions
- **User Editing**: Limited or read-only

#### User Pages (`pageType: "user"`)  
- **Location**: `/pages/`
- **Management**: User-managed, preserved during upgrades
- **Examples**: Welcome, project pages, meeting notes, personal content
- **Upgrade Behavior**: Never replaced, always preserved
- **User Editing**: Full editing rights

#### Documentation Pages (`pageType: "documentation"`)
- **Location**: `/docs/` or `/required-pages/` (depending on audience)
- **Management**: Developer-managed, versioned with app
- **Examples**: API docs, development guides, user manuals
- **Upgrade Behavior**: Updated with app versions
- **User Editing**: Read-only for users, editable by developers

### 4. Complete Metadata Example

```yaml
---
# Required fields
title: "API Documentation"
pageType: "documentation"
uuid: "api-docs-v1-uuid"
lastModified: "2025-09-10T10:00:00.000Z"

# Content classification
category: "Documentation/API"
categories: ["Documentation", "Developer"]
user-keywords: ["api", "reference"]

# Documentation-specific
documentationType: "api"
audience: "developer"
isProtected: true

# System fields (when applicable)
isSystemPage: false
autoGenerated: false
updatePolicy: "preserve-user-changes"
---
```

### 5. Upgrade Safety Rules

| Page Type | Location | Upgrade Action | User Changes |
|-----------|----------|----------------|--------------|
| `system` | `/required-pages/` | Replace | Not preserved |
| `user` | `/pages/` | Preserve | Always preserved |
| `documentation` | `/docs/` or `/required-pages/` | Update | Merge/conflict resolution |

### 6. Navigation and Search Integration

#### By Page Type
- **System Pages**: Admin navigation, system information
- **User Pages**: Main content navigation, search results
- **Documentation**: Help system, developer resources

#### By Category
- **Content-based**: Logical organization for users
- **System-based**: Technical organization for admins

#### By Documentation Type
- **User Docs**: End-user help and tutorials
- **Developer Docs**: Technical implementation guides  
- **API Docs**: Reference documentation for integration

### 7. Implementation Strategy

#### Phase 1: Metadata Standards
1. Update Page-Metadata.md with new fields
2. Add validation for pageType, documentationType
3. Create migration script for existing pages

#### Phase 2: File Organization
1. Audit current pages and classify them
2. Move system pages to `/required-pages/`
3. Ensure user pages remain in `/pages/`

#### Phase 3: Upgrade Safety
1. Implement upgrade script that respects pageType
2. Add protection for user-generated content
3. Create backup/restore mechanisms

#### Phase 4: Enhanced Navigation
1. Update navigation to use page classification
2. Create filtered views by page type
3. Implement documentation-specific features

### 8. Migration Plan

#### Current State Assessment
```bash
# Audit existing pages
find pages/ -name "*.md" | head -10
find required-pages/ -name "*.md" | head -10
find docs/ -name "*.md" | head -10
```

#### Classification Rules
- Pages in `/required-pages/` → `pageType: "system"`
- Pages in `/pages/` → `pageType: "user"`  
- Pages in `/docs/` → `pageType: "documentation"`
- System-generated pages → `autoGenerated: true`
- User-editable pages → `isProtected: false`

### 9. Benefits

1. **Upgrade Safety**: Clear separation of app vs user content
2. **Content Organization**: Multiple classification dimensions
3. **Documentation Structure**: Proper audience targeting
4. **Developer Experience**: Clear development vs user content boundaries
5. **User Experience**: Preserved customizations during upgrades
6. **Maintenance**: Automated page management with manual override capability

### 10. Future Enhancements

- **Template System**: Page templates based on pageType
- **Workflow Integration**: Approval processes for different page types
- **Version Control**: Git integration for documentation pages
- **Access Control**: Role-based permissions by page type
- **Content Validation**: Schema validation based on page classification

## Implementation Notes

This architecture provides:
- **Clear operational boundaries** for upgrades
- **Flexible content organization** for users
- **Proper documentation management** for developers
- **Extensible classification system** for future needs

The key insight is that we need **both** physical organization (file system) **and** logical organization (metadata) to achieve all goals effectively.
