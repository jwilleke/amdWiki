<%- include('header') %>

<div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
    <h1 class="h2">Search Results for: "<%= query %>"</h1>
</div>

<form action="/search" method="GET">
    <div class="input-group mb-3">
        <input type="text" class="form-control" name="q" value="<%= query %>" placeholder="Search...">
        <select class="form-select" name="category">
            <option value="">All Categories</option>
            <% categories.forEach(category => { %>
                <option value="<%= category %>" <%= selectedCategory === category ? 'selected' : '' %>><%= category %></option>
            <% }); %>
        </select>
        <select class="form-select" name="keyword">
            <option value="">All Keywords</option>
            <% keywords.forEach(keyword => { %>
                <option value="<%= keyword %>" <%= selectedKeyword === keyword ? 'selected' : '' %>><%= keyword %></option>
            <% }); %>
        </select>
        <button class="btn btn-outline-secondary" type="submit">Search</button>
    </div>
</form>

<% if (results.length > 0) { %>
    <ul class="list-group">
        <% results.forEach(result => { %>
            <li class="list-group-item d-flex justify-content-between align-items-center">
                <a href="/wiki/<%= result.name %>"><%= result.name %></a>
                <span class="badge bg-primary rounded-pill"><%= result.score.toFixed(2) %></span>
            </li>
        <% }); %>
    </ul>
<% } else { %>
    <p>No pages found matching your query.</p>
<% } %>

<%- include('footer') %>